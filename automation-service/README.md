
# Browser Automation Service

Сервис автоматизации браузера для управления социальными сетями.

## Возможности

- ✅ Подключение к Supabase для получения заданий
- ✅ Автоматизация браузера через Playwright
- ✅ Поддержка прокси
- ✅ Множественное выполнение заданий
- ✅ Логирование действий в реальном времени
- ✅ Поддержка платформ: Telegram, TikTok, YouTube

## Установка

1. Установите зависимости:
```bash
npm install
```

2. Установите браузеры для Playwright:
```bash
npx playwright install chromium
```

3. Скопируйте и настройте переменные окружения:
```bash
cp .env.example .env
```

4. Заполните `.env` файл:
```env
SUPABASE_URL=https://izmgzstdgoswlozinmyk.supabase.co
SUPABASE_SERVICE_KEY=your_service_key_here
MAX_CONCURRENT_JOBS=3
CHECK_INTERVAL=30000
```

## Запуск

Для разработки:
```bash
npm run dev
```

Для продакшена:
```bash
npm start
```

## Архитектура

- `src/index.js` - главный файл сервиса
- `src/config.js` - конфигурация
- `src/supabase.js` - работа с базой данных
- `src/browser-automation.js` - автоматизация браузера
- `src/job-manager.js` - менеджер заданий

## Как работает

1. Каждые 30 секунд сервис проверяет таблицу `scenarios` на наличие заданий со статусом "waiting"
2. Для каждого задания:
   - Получает данные аккаунта и прокси
   - Запускает браузер с настройками прокси
   - Выполняет автоматизированные действия
   - Обновляет статусы в базе данных
   - Логирует все действия

## Безопасность

- Использует случайные User-Agent
- Имитирует человеческое поведение
- Поддерживает задержки между действиями
- Использует прокси для анонимности

## Мониторинг

Сервис выводит подробные логи:
- Статус активных заданий
- Количество доступных слотов
- Ошибки выполнения
- Статистику работы
